(this["webpackJsonponline-store-front"]=this["webpackJsonponline-store-front"]||[]).push([[0],{32:function(e,t,a){},34:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),r=a(23),n=a.n(r),i=(a(32),a(6)),o=a(7),l=a.n(o),u=a(5),d=a(14),j=a(24),m=a(25),b=a(27),h=a(26),p=(a(34),a(8)),x=a.n(p),O=a(12),v=a(2),f=c.a.createContext({}),g=a(0),N=function(e){return function(t){return Object(g.jsx)(f.Consumer,{children:function(a){return Object(g.jsx)(e,Object(i.a)(Object(i.a)({},t),{},{context:a}))}})}},C=function(e){var t=e.cartItem,a=e.cartKey,s=t.product,c=t.amount;return Object(g.jsx)("div",{className:" column is-half",children:Object(g.jsx)("div",{className:"box",children:Object(g.jsxs)("div",{className:"media",children:[Object(g.jsx)("div",{className:"media-left",children:Object(g.jsx)("figure",{className:"image is-64x64",children:Object(g.jsx)("img",{src:"https://bulma.io/images/placeholders/128x128.png",alt:s.shortDesc})})}),Object(g.jsxs)("div",{className:"media-content",children:[Object(g.jsxs)("b",{style:{textTransform:"capitalize"},children:[s.name," ",Object(g.jsxs)("span",{className:"tag is-primary",children:["$",s.price]})]}),Object(g.jsx)("div",{children:s.shortDesc}),Object(g.jsx)("small",{children:"".concat(c," in cart")})]}),Object(g.jsx)("div",{className:"media-right",onClick:function(){return e.removeFromCart(a)},children:Object(g.jsx)("span",{className:"delete is-large"})})]})})})},k=N((function(e){var t=e.context.cart,a=Object.keys(t||{});return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"hero is-primary",children:Object(g.jsx)("div",{className:"hero-body container",children:Object(g.jsx)("h4",{className:"title",children:"My Cart"})})}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{className:"container",children:a.length?Object(g.jsxs)("div",{className:"column columns is-multiline",children:[a.map((function(a){return Object(g.jsx)(C,{cartKey:a,cartItem:t[a],removeFromCart:e.context.removeFromCart},a)})),Object(g.jsxs)("div",{className:"column is-12 is-clearfix",children:[Object(g.jsx)("br",{}),Object(g.jsxs)("div",{className:"is-pulled-right",children:[Object(g.jsx)("button",{onClick:e.context.clearCart,className:"button is-warning ",children:"Clear cart"})," ",Object(g.jsx)("button",{className:"button is-success",onClick:e.context.checkout,children:"Checkout"})]})]})]}):Object(g.jsx)("div",{className:"column",children:Object(g.jsx)("div",{className:"title has-text-grey-light",children:"Order sent cuccesfully!"})})})]})})),y=function(e){var t=e.product;return Object(g.jsx)("div",{className:" column is-half",children:Object(g.jsx)("div",{className:"box",children:Object(g.jsxs)("div",{className:"media",children:[Object(g.jsx)("div",{className:"media-left",children:Object(g.jsx)("figure",{className:"image is-64x64",children:Object(g.jsx)("img",{src:"https://bulma.io/images/placeholders/128x128.png",alt:t.shortDesc})})}),Object(g.jsxs)("div",{className:"media-content",children:[Object(g.jsxs)("b",{style:{textTransform:"capitalize"},children:[t.name," ",Object(g.jsxs)("span",{className:"tag is-black",children:["$",t.price]})]}),Object(g.jsx)("div",{children:t.shortDesc}),t.stock>0?Object(g.jsx)("small",{children:t.stock+" Available"}):Object(g.jsx)("small",{className:"has-text-danger",children:"Out Of Stock"}),Object(g.jsx)("div",{className:"is-clearfix",children:Object(g.jsx)("button",{className:"button is-small is-outlined is-primary   is-pulled-right",onClick:function(){return e.addToCart({id:t.name,product:t,amount:1})},children:"Add to Cart"})})]})]})})})},q=N((function(e){var t=e.context.products;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"hero is-danger",children:Object(g.jsx)("div",{className:"hero-body container",children:Object(g.jsx)("h4",{className:"title",children:"Our Products"})})}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{className:"container",children:Object(g.jsx)("div",{className:"column columns is-multiline",children:t&&t.length?t.map((function(t,a){return Object(g.jsx)(y,{product:t,addToCart:e.context.addToCart},a)})):Object(g.jsx)("div",{className:"column",children:Object(g.jsx)("span",{className:"title has-text-grey-light",children:"No products found!"})})})})]})})),S=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(j.a)(this,a),(s=t.call(this,e)).addToCart=function(e){console.log("addToChart funktio");var t=s.state.cart;t[e.id]?t[e.id].amount+=e.amount:t[e.id]=e,t[e.id].amount>t[e.id].product.stock&&(t[e.id].amount=t[e.id].product.stock),localStorage.setItem("cart",JSON.stringify(t)),console.log(t,"add to cart() funktio asetetaan cart localstoreeen"),s.setState({cart:t}),console.log(s.state.cart,"asetetaan cart state")},s.removeFromCart=function(e){var t=s.state.cart;delete t[e],localStorage.setItem("cart",JSON.stringify(t)),s.setState({cart:t})},s.clearCart=function(){console.log("clearCart localstore ja state.cart tyhj\xe4ys");localStorage.removeItem("cart"),s.setState({cart:{}})},s.checkout=Object(d.a)(l.a.mark((function e(){var t,a,c,r,n,i,o,d,j,m,b,h,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=s.state.cart,a=[],console.log("cart from checkout",s.state.cart),c=0,r=Object.entries(t);c<r.length;c++)n=Object(u.a)(r[c],2),i=n[0],o=n[1],console.log(i,o),console.log(o.product.id,o.amount),d=o.product.id,j=o.product.name,m=o.product.price,b=o.amount,a.push({id:d,amount:b,name:j,price:m});return console.log(a,"orderlist"),h={products:a},console.log(h,"Allaaaa"),e.prev=7,e.next=10,x.a.post("/api/orders",h);case 10:if(p=e.sent,console.log("response data from post",p.data),"OK"!==p.data.status){e.next=18;break}return console.log("status OK"),e.next=16,x.a.get("/api/products").then((function(e){console.log("resp data/orders from invenrory",e.data);var t=e.data;console.log("puuttuva",e.data.products[1].id),s.setState({products:t}),s.clearCart()}));case 16:e.next=21;break;case 18:console.log("Tilaus ei onnistunu"),console.log("Out of stock seuraavat tuotteet"),console.log(p.data.products.name);case 21:return e.abrupt("return",p.data);case 24:return e.prev=24,e.t0=e.catch(7),e.abrupt("return",{error:"Could not sent order"});case 27:case"end":return e.stop()}}),e,null,[[7,24]])}))),s.state={cart:{},products:[]},s}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("didmount"),t=(t=localStorage.getItem("cart"))?JSON.parse(t):{},this.setState({products:D,cart:t}),e.prev=4,e.next=7,x.a.get("/api/products");case 7:return a=e.sent,console.log(a.data),console.log(a.data),e.next=12,x.a.get("/api/products").then((function(e){var a=e.data;console.log("products",a),console.log("this",s.state),t=t?JSON.parse(t):{},s.setState({products:D,cart:t}),console.log("set this state to products and casrds",s.state)}));case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(4),e.abrupt("return",{error:"Could not get products"});case 17:case"end":return e.stop()}}),e,this,[[4,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(g.jsx)(f.Provider,{value:Object(i.a)(Object(i.a)({},this.state),{},{removeFromCart:this.removeFromCart,addToCart:this.addToCart,clearCart:this.clearCart,checkout:this.checkout}),children:Object(g.jsx)(O.a,{children:Object(g.jsxs)("div",{className:"App",children:[Object(g.jsxs)("nav",{className:"navbar container",role:"navigation","aria-label":"main navigation",children:[Object(g.jsxs)("div",{className:"navbar-brand",children:[Object(g.jsx)("b",{className:"navbar-item is-size-4",children:"Online store"}),Object(g.jsxs)("label",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:function(t){t.preventDefault(),e.setState({showMenu:!e.state.showMenu})},children:[Object(g.jsx)("span",{"aria-hidden":"true"}),Object(g.jsx)("span",{"aria-hidden":"true"}),Object(g.jsx)("span",{"aria-hidden":"true"})]})]}),Object(g.jsxs)("div",{className:"navbar-menu",children:[Object(g.jsx)(O.b,{to:"/products",className:"navbar-item",children:"Products"}),Object(g.jsxs)(O.b,{to:"/cart",className:"navbar-item",children:["Cart",Object(g.jsx)("span",{className:"tag is-primary",style:{marginLeft:"5px"},children:Object.keys(this.state.cart).length})]})]})]}),Object(g.jsxs)(v.c,{children:[Object(g.jsx)(v.a,{exact:!0,path:"/",element:Object(g.jsx)(q,{})}),Object(g.jsx)(v.a,{exact:!0,path:"/cart",element:Object(g.jsx)(k,{})}),Object(g.jsx)(v.a,{exact:!0,path:"/products",element:Object(g.jsx)(q,{})})]})]})})})}}]),a}(s.Component),D=[{id:"hdmdu0t80yjkfqselfc",name:"Jeans",stock:10,price:399.99,shortDesc:"Nulla facilisi. Curabitur at lacus ac velit ornare lobortis.",description:"Cras sagittis. Praesent nec nisl a purus blandit viverra. Ut leo. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Fusce a quam."},{id:"3dc7fiyzlfmkfqseqam",name:"socs",stock:20,price:299.99,shortDesc:"Nulla facilisi. Curabitur at lacus ac velit ornare lobortis.",description:"Cras sagittis. Praesent nec nisl a purus blandit viverra. Ut leo. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Fusce a quam."},{id:"aoe8wvdxvrkfqsew67",name:"T-shirts",stock:15,price:149.99,shortDesc:"Nulla facilisi. Curabitur at lacus ac velit ornare lobortis.",description:"Cras sagittis. Praesent nec nisl a purus blandit viverra. Ut leo. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Fusce a quam."},{id:"bmfrurdkswtkfqsf15j",name:"dresses",stock:5,price:109.99,shortDesc:"Nulla facilisi. Curabitur at lacus ac velit ornare lobortis.",description:"Cras sagittis. Praesent nec nisl a purus blandit viverra. Ut leo. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Fusce a quam."}];a(54);n.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(S,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.940c46b5.chunk.js.map